<?xml version="1.0" encoding="UTF-8"?>
<includes>

    <include name="MediaFilter_Node_ClearAll">
        <onfocus>ClearProperty(MediaFilter.InfoLabel)</onfocus>

        <onfocus condition="Window.IsVisible(MyVideoNav.xml) + [Container.Content(movies) | Container.Content(sets)]">SetProperty(MediaFilter.ContentType,Movies)</onfocus>
        <onfocus condition="Window.IsVisible(MyVideoNav.xml) + [Container.Content(tvshows) | Container.Content(seasons) | Container.Content(episodes)]">SetProperty(MediaFilter.ContentType,TV)</onfocus>
        <onfocus condition="Window.IsVisible(MyMusicNav.xml)">SetProperty(MediaFilter.ContentType,Music)</onfocus>

        <onfocus condition="!String.StartsWith(Container.FolderPath,plugin://script.skinvariables/?info=get_filter_dir) + [Container.Content(movies) | Container.Content(tvshows) | Container.Content(albums) | Container.Content(artists)]">SetProperty(MediaFilter.BaseDir.Name,$VAR[Label_Section_Main])</onfocus>
        <onfocus condition="!String.StartsWith(Container.FolderPath,plugin://script.skinvariables/?info=get_filter_dir) + [Container.Content(movies) | Container.Content(tvshows) | Container.Content(albums) | Container.Content(artists)]">SetProperty(MediaFilter.BaseDir,$INFO[Container.FolderPath])</onfocus>
        <onfocus condition="!String.StartsWith(Container.FolderPath,plugin://script.skinvariables/?info=get_filter_dir) + ![Container.Content(movies) | Container.Content(tvshows) | Container.Content(albums) | Container.Content(artists)]">ClearProperty(MediaFilter.BaseDir.Name)</onfocus>
        <onfocus condition="!String.StartsWith(Container.FolderPath,plugin://script.skinvariables/?info=get_filter_dir) + ![Container.Content(movies) | Container.Content(tvshows) | Container.Content(albums) | Container.Content(artists)]">ClearProperty(MediaFilter.BaseDir)</onfocus>

        <onfocus condition="!String.StartsWith(Container.FolderPath,plugin://script.skinvariables/?info=get_filter_dir)">ClearProperty(MediaFilter.Genre)</onfocus>
        <onfocus condition="!String.StartsWith(Container.FolderPath,plugin://script.skinvariables/?info=get_filter_dir)">ClearProperty(MediaFilter.Studio)</onfocus>
        <onfocus condition="!String.StartsWith(Container.FolderPath,plugin://script.skinvariables/?info=get_filter_dir)">ClearProperty(MediaFilter.Country)</onfocus>
        <onfocus condition="!String.StartsWith(Container.FolderPath,plugin://script.skinvariables/?info=get_filter_dir)">ClearProperty(MediaFilter.MPAA)</onfocus>
        <onfocus condition="!String.StartsWith(Container.FolderPath,plugin://script.skinvariables/?info=get_filter_dir)">ClearProperty(MediaFilter.Director)</onfocus>
        <onfocus condition="!String.StartsWith(Container.FolderPath,plugin://script.skinvariables/?info=get_filter_dir)">ClearProperty(MediaFilter.Writer)</onfocus>
        <onfocus condition="!String.StartsWith(Container.FolderPath,plugin://script.skinvariables/?info=get_filter_dir)">ClearProperty(MediaFilter.Artist)</onfocus>
    </include>

    <include name="MediaFilter_Node">

        <control type="group">
            <include>Dimension_DialogSideMenu</include>
            <include>Animation_Right</include>
            <visible>ControlGroup(9000).HasFocus() | ControlGroup(9900).HasFocus() | $EXP[Exp_FilterWall_IsActive]</visible>
            <include content="Dialog_Dim_Side">
                <param name="slide_condition">ControlGroup(9900).HasFocus()</param>
            </include>

            <!-- Bottom Layer -->
            <include content="Dialog_Background_Side">
                <param name="slide_condition">ControlGroup(9900).HasFocus()</param>
                <param name="dialog_size">Dimension_DialogSideMenu</param>

                <!-- Side Buttons -->
                <include content="Dialog_Body">
                    <include content="Dialog_Side_Grouplist">
                        <param name="id">9900</param>
                        <onright>9000</onright>
                        <onback>68</onback>

                        <onleft condition="!Integer.IsEqual(Container.CurrentPage,1)">SetFocus(50)</onleft>
                        <onleft condition="!Integer.IsEqual(Container.CurrentPage,1)">Action(pageup)</onleft>
                        <onleft condition="Integer.IsEqual(Container.CurrentPage,1)">SetFocus($VAR[Action_View_ContentID],99999,absolute)</onleft>
                        <onleft>SetFocus(9900)</onleft>

                        <include content="Dialog_Side_Button">
                            <param name="id">01</param>
                            <param name="label">$LOCALIZE[15067]</param>
                            <param name="icon">special://skin/extras/icons/circle-xmark.png</param>
                            <onclick>SetFocus(68)</onclick>
                        </include>
                    </include>
                </include>
            </include>

            <include content="Dialog_Foreground_Side">
                <param name="dialog_size">Dimension_DialogSideMenu</param>
                <param name="slide_animation">False</param>
                <param name="topline">true</param>
                <param name="subline">true</param>

                <include content="Dialog_Head">
                    <param name="label">Options</param>
                </include>

                <include content="Dialog_Body">
                    <include content="Dialog_Body_Grouplist">
                        <param name="id">9000</param>
                        <bottom>-40</bottom>

                        <!-- <onleft>9900</onleft> -->

                        <onleft condition="!Integer.IsEqual(Container.CurrentPage,1)">SetFocus(50)</onleft>
                        <onleft condition="!Integer.IsEqual(Container.CurrentPage,1)">Action(pageup)</onleft>
                        <onleft condition="Integer.IsEqual(Container.CurrentPage,1)">SetFocus($VAR[Action_View_ContentID],99999,absolute)</onleft>
                        <onleft>SetFocus(9000)</onleft>

                        <onright condition="!Integer.IsEqual(Container.CurrentPage,Container.NumPages)">SetFocus(50)</onright>
                        <onright condition="!Integer.IsEqual(Container.CurrentPage,Container.NumPages)">Action(pagedown)</onright>
                        <onright condition="Integer.IsEqual(Container.CurrentPage,Container.NumPages)">SetFocus($VAR[Action_View_ContentID],0,absolute)</onright>
                        <onright>SetFocus(9000)</onright>

                        <onback>68</onback>

                        <control type="edit" id="19">
                            <description>Filter</description>
                            <font>font_main</font>
                            <textcolor>dialog_fg_70</textcolor>
                            <selectedcolor>dialog_fg_70</selectedcolor>
                            <disabledcolor>dialog_fg_30</disabledcolor>
                            <focusedcolor>$VAR[ColorSelected]</focusedcolor>
                            <height>view_pad</height>
                            <textoffsetx>40</textoffsetx>
                            <align>left</align>
                        </control>

                        <control type="group" id="9019">
                            <height>40</height>
                            <control type="image">
                                <centertop>50%</centertop>
                                <height>1</height>
                                <texture colordiffuse="dialog_fg_12">common/white.png</texture>
                                <left>20</left>
                                <right>20</right>
                            </control>
                        </control>


                        <include content="Settings_Button">
                            <param name="id">9018</param>
                            <param name="control">button</param>
                            <param name="dialog">true</param>
                            <label>$LOCALIZE[456]</label>
                            <label2>$LOCALIZE[31167]</label2>
                            <onclick>SetFocus(68)</onclick>
                            <visible>$EXP[Exp_FilterWall_IsActive]</visible>
                        </include>
                        <include content="Settings_Button">
                            <param name="id">9016</param>
                            <param name="control">button</param>
                            <param name="dialog">true</param>
                            <label>$LOCALIZE[15067]</label>
                            <onclick>SetFocus(50)</onclick>
                            <visible>![$EXP[Exp_FilterWall_IsActive]]</visible>
                        </include>


                        <include content="Settings_Button">
                            <param name="id">9007</param>
                            <param name="control">button</param>
                            <param name="dialog">true</param>
                            <width>dialog_main_button_w</width>
                            <label>$LOCALIZE[31048]</label>
                            <label2>$VAR[Label_SortMethod]</label2>
                            <onclick>SetProperty(DialogSelectType,Menu,Home)</onclick>
                            <onclick condition="![Window.IsMedia + String.IsEqual(Container.FolderName,Skin Variables) + !String.IsEmpty(Window.Property(MediaFilter.BaseDir.Name))]">SendClick(3)</onclick>
                            <onclick condition="Window.IsMedia + String.IsEqual(Container.FolderName,Skin Variables) + !String.IsEmpty(Window.Property(MediaFilter.BaseDir.Name))">RunScript(script.skinvariables,run_dialog=select,heading=$LOCALIZE[581],separator=||,list=title||genre||year||rating||playcount||director||originaltitle||lastplayed||writer||studio||mpaa||country||premiered||top250||votes,"executebuiltin=SetProperty(MediaFilter.SortBy,{v})||route=run_executebuiltin=special://skin/shortcuts/builtins/skinvariables-mediafilter.json&amp;use_rules=True")</onclick>
                        </include>

                        <include content="Settings_Button">
                            <param name="id">9008</param>
                            <param name="control">button</param>
                            <param name="dialog">true</param>
                            <width>dialog_main_button_w</width>
                            <label>$LOCALIZE[31345]</label>
                            <label2>$VAR[Label_SortDirection]</label2>
                            <onclick>SetProperty(DialogSelectType,Menu,Home)</onclick>
                            <onclick condition="![Window.IsMedia + String.IsEqual(Container.FolderName,Skin Variables) + !String.IsEmpty(Window.Property(MediaFilter.BaseDir.Name))]">SendClick(4)</onclick>

                            <onclick condition="!String.IsEqual(Window.Property(MediaFilter.SortHow),desc) + Window.IsMedia + String.IsEqual(Container.FolderName,Skin Variables) + !String.IsEmpty(Window.Property(MediaFilter.BaseDir.Name))">SetProperty(MediaFilter.SortHow,desc)</onclick>
                            <onclick condition="String.IsEqual(Window.Property(MediaFilter.SortHow),desc) + Window.IsMedia + String.IsEqual(Container.FolderName,Skin Variables) + !String.IsEmpty(Window.Property(MediaFilter.BaseDir.Name))">ClearProperty(MediaFilter.SortHow)</onclick>

                            <onclick condition="Window.IsMedia + String.IsEqual(Container.FolderName,Skin Variables) + !String.IsEmpty(Window.Property(MediaFilter.BaseDir.Name))">RunScript(script.skinvariables,"run_executebuiltin=special://skin/shortcuts/builtins/skinvariables-mediafilter.json",use_rules)</onclick>
                        </include>

                        <include content="Settings_Button">
                            <param name="id">9004</param>
                            <param name="control">radiobutton</param>
                            <param name="dialog">true</param>
                            <label>$LOCALIZE[587]</label>
                            <selected>Container.Filtered | !String.IsEmpty(Control.GetLabel(19).index(1))</selected>
                            <visible>Container.CanFilterAdvanced</visible>
                            <onclick>Filter</onclick>
                        </include>

                        <include content="Settings_Button">
                            <param name="id">9005</param>
                            <param name="control">button</param>
                            <param name="dialog">true</param>
                            <label>$LOCALIZE[192]</label>
                            <visible>!Container.CanFilterAdvanced</visible>
                            <onclick>RunScript(script.skinvariables,set_editcontrol=19,window_id=1105,setfocus=9001)</onclick>
                            <onclick>ClearProperty(MediaFilter.Genre)</onclick>
                            <onclick>ClearProperty(MediaFilter.Studio)</onclick>
                            <onclick>ClearProperty(MediaFilter.Country)</onclick>
                            <onclick>ClearProperty(MediaFilter.MPAA)</onclick>
                            <onclick>ClearProperty(MediaFilter.Director)</onclick>
                            <onclick>ClearProperty(MediaFilter.Writer)</onclick>
                        </include>

                        <include content="Settings_Button">
                            <param name="id">9006</param>
                            <param name="control">radiobutton</param>
                            <param name="dialog">true</param>
                            <width>dialog_main_button_w</width>
                            <label>$LOCALIZE[20367]</label>
                            <onclick>SendClick(14)</onclick>
                            <selected>System.Setting(hidewatched)</selected>
                            <visible>Window.IsVisible(videos)</visible>
                        </include>

                        <include content="Settings_Button">
                            <param name="id">9009</param>
                            <param name="control">button</param>
                            <param name="dialog">true</param>
                            <width>dialog_main_button_w</width>
                            <label>$LOCALIZE[31319]</label>
                            <label2>$INFO[Container.ViewMode]</label2>
                            <onclick>SetFocus(68)</onclick>
                            <onclick>Runscript(script.skinvariables,action=buildviews,contentid=$VAR[Items_ViewMode_Switch],pluginname=$INFO[Container.PluginName])</onclick>
                        </include>

                        <!-- <include content="Settings_Label">
                            <param name="id">9017</param>
                            <param name="dialog">true</param>
                            <label>$LOCALIZE[31173]</label>
                            <height>40</height>
                            <top>0</top>
                        </include> -->
                        <control type="group" id="9017">
                            <height>40</height>
                            <control type="image">
                                <centertop>50%</centertop>
                                <height>1</height>
                                <texture colordiffuse="dialog_fg_12">common/white.png</texture>
                                <left>20</left>
                                <right>20</right>
                            </control>
                        </control>

                        <include content="Settings_Button">
                            <param name="id">9011</param>
                            <param name="control">button</param>
                            <param name="dialog">true</param>
                            <label>$LOCALIZE[31344]</label>
                            <label2>$INFO[ListItem.SortLetter]</label2>
                            <onclick condition="!Integer.IsEqual(Container.CurrentPAge,Container.NumPages)">SetFocus(50)</onclick>
                            <onclick condition="!Integer.IsEqual(Container.CurrentPAge,Container.NumPages)">Action(nextletter)</onclick>
                            <onclick condition="Integer.IsEqual(Container.CurrentPAge,Container.NumPages)">SetFocus($VAR[Action_View_ContentID],0,absolute)</onclick>
                            <onclick>SetFocus(9011)</onclick>
                        </include>

                        <include content="Settings_Button">
                            <param name="id">9012</param>
                            <param name="control">button</param>
                            <param name="dialog">true</param>
                            <label>$LOCALIZE[31135]</label>
                            <label2>$INFO[Container.CurrentPage]$INFO[Container.NumPages, $LOCALIZE[1443] ,]</label2>
                            <onclick condition="!Integer.IsEqual(Container.CurrentPAge,Container.NumPages)">SetFocus(50)</onclick>
                            <onclick condition="!Integer.IsEqual(Container.CurrentPAge,Container.NumPages)">Action(pagedown)</onclick>
                            <onclick condition="Integer.IsEqual(Container.CurrentPAge,Container.NumPages)">SetFocus($VAR[Action_View_ContentID],0,absolute)</onclick>
                            <onclick>SetFocus(9012)</onclick>
                        </include>

                        <!-- <control type="scrollbar" id="60">
                            <orientation>horizontal</orientation>
                            <texturesliderbackground />
                            <texturesliderbar colordiffuse="main_logo" border="4">scrollbar/scrollh.png</texturesliderbar>
                            <showonepage>true</showonepage>
                            <height>10</height>
                            <centertop>60</centertop>
                            <include>MediaFilter_Node_ClearAll</include>
                            <left>40</left>
                            <right>40</right>
                        </control> -->



                    </include>
                </include>


            </include>

        </control>


    </include>

    <include name="MediaFilter_Discover_Node">


        <control type="group">
            <include>Dimension_DialogSideMenu</include>
            <include>Animation_Right_Delay</include>
            <visible>Control.IsVisible(55)</visible>
            <include content="Dialog_Dim_Side">
                <param name="slide_condition">ControlGroup(550).HasFocus()</param>
            </include>

            <!-- Bottom Layer -->
            <include content="Dialog_Background_Side">
                <param name="slide_condition">ControlGroup(550).HasFocus()</param>
                <param name="dialog_size">Dimension_DialogSideMenu</param>
                <!-- Side Buttons -->
                <include content="Dialog_Body">
                    <include content="Dialog_Side_Grouplist">
                        <param name="id">550</param>
                        <onright>55</onright>
                        <include content="Dialog_Side_Button">
                            <param name="baseid">55</param>
                            <param name="id">01</param>
                            <param name="label">Movies</param>
                            <param name="icon">special://skin/extras/icons/binoculars.png</param>
                            <param name="visible">String.IsEqual(Container(55).ListItemAbsolute(0).Property(Param.TMDb_Type),movie)</param>
                            <onclick>Container.Update(plugin://plugin.video.themoviedb.helper/?info=user_discover&amp;tmdb_type=tv)</onclick>
                        </include>
                        <include content="Dialog_Side_Button">
                            <param name="baseid">55</param>
                            <param name="id">02</param>
                            <param name="label">TV Shows</param>
                            <param name="icon">special://skin/extras/icons/binoculars.png</param>
                            <param name="visible">String.IsEqual(Container(55).ListItemAbsolute(0).Property(Param.TMDb_Type),tv)</param>
                            <onclick>Container.Update(plugin://plugin.video.themoviedb.helper/?info=user_discover&amp;tmdb_type=movie)</onclick>
                        </include>

                        <include content="Dialog_Side_Button">
                            <param name="baseid">55</param>
                            <param name="id">03</param>
                            <param name="label">Match</param>
                            <param name="icon">special://skin/extras/icons/scale-unbalanced.png</param>
                            <param name="visible">true</param>
                            <onclick>Container.Update($INFO[Container(55).ListItemAbsolute(1).FolderPath])</onclick>
                        </include>

                        <include content="Dialog_Side_Button">
                            <param name="baseid">55</param>
                            <param name="id">04</param>
                            <param name="label">Sort</param>
                            <param name="icon">special://skin/extras/icons/sort2.png</param>
                            <param name="visible">true</param>
                            <onclick>Container.Update($INFO[Container(55).ListItemAbsolute(2).FolderPath])</onclick>
                        </include>

                        <include content="Dialog_Side_Button">
                            <param name="baseid">55</param>
                            <param name="id">05</param>
                            <param name="label">Add Rule</param>
                            <param name="icon">special://skin/extras/icons/circle-plus.png</param>
                            <param name="visible">true</param>
                            <onclick>Container.Update(plugin://plugin.video.themoviedb.helper/?info=user_discover&amp;method=add_rule&amp;tmdb_type=movie)</onclick>
                        </include>

                        <include content="Dialog_Side_Button">
                            <param name="baseid">55</param>
                            <param name="id">06</param>
                            <param name="label">Clear</param>
                            <param name="icon">special://skin/extras/icons/triangle-exclamation.png</param>
                            <param name="visible">true</param>
                            <onclick>Container.Update(plugin://plugin.video.themoviedb.helper/?info=user_discover&amp;method=clear&amp;tmdb_type=movie)</onclick>
                        </include>

                        <include content="Dialog_Side_Button">
                            <param name="baseid">55</param>
                            <param name="id">07</param>
                            <param name="label">Save</param>
                            <param name="icon">special://skin/extras/icons/floppy-disk.png</param>
                            <param name="visible">true</param>
                            <onclick>Container.Update(plugin://plugin.video.themoviedb.helper/?info=user_discover&amp;method=save&amp;tmdb_type=movie)</onclick>
                        </include>
                    </include>
                </include>
            </include>

            <include content="Dialog_Foreground_Side">
                <param name="dialog_size">Dimension_DialogSideMenu</param>
                <param name="slide_condition">ControlGroup(550).HasFocus()</param>
                <param name="lines_right">0</param>
                <param name="topline">true</param>
                <param name="subline">true</param>

                <!-- Header -->
                <include content="Dialog_Head">
                    <param name="label">[CAPITALIZE]$INFO[Container(55).ListItemAbsolute(0).Label][/CAPITALIZE]</param>
                </include>

                <!-- Content -->
                <include content="Dialog_Body">
                    <include content="Dialog_Body_Group">
                    <include content="List_DialogSelect">
                        <param name="id">55</param>
                        <param name="textcolor">dialog_fg</param>
                        <movement>8</movement>
                        <onleft>550</onleft>
                        <visible>$EXP[Exp_View_55]</visible>
                        <onfocus>SetProperty(TMDbHelper.WidgetContainer,553)</onfocus>
                    </include>
                </include>
                </include>
            </include>

        </control>
    </include>

</includes>
